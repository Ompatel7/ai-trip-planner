import { GoogleGenerativeAI } from "@google/generative-ai";

  const genAI = new GoogleGenerativeAI(import.meta.env.VITE_GEMINI_APIKEY);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-1.5-flash",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 40,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
  };
  
   export const chatSession = model.startChat({
      generationConfig,
      history: [
        {
          role: "user",
          parts: [
            {text: "```json\n{\n  \"hotels\": [\n    {\n      \"name\": \"The LaLiT Golf & Spa Resort Goa\",\n      \"address\": \"Raj Baga, Cansaulim, South Goa, Goa 403707\",\n      \"price\": \"₹3,500 onwards\",\n      \"imageUrl\": \"https://www.lalit.com/images/gallery/The-LaLiT-Golf-&-Spa-Resort-Goa/large/the-lalit-golf-and-spa-resort-goa-exterior.jpg\",\n      \"geoCoordinates\": \"15.2718, 73.9499\",\n      \"rating\": 4.5,\n      \"description\": \"A luxurious resort with stunning views of the Arabian Sea, offering a golf course, spa, and multiple dining options.\"\n    },\n    {\n      \"name\": \"The Leela Goa\",\n      \"address\": \"Mobor, Cavelossim, South Goa, Goa 403702\",\n      \"price\": \"₹4,000 onwards\",\n      \"imageUrl\": \"https://www.theleela.com/images/gallery/The-Leela-Goa/large/the-leela-goa-exterior.jpg\",\n      \"geoCoordinates\": \"15.2256, 73.9832\",\n      \"rating\": 4.8,\n      \"description\": \"A beachfront property known for its exceptional service, fine dining, and serene atmosphere.\"\n    },\n    {\n      \"name\": \"The Zuri White Sands Resort & Casino Goa\",\n      \"address\": \"Varca Beach, Varca, South Goa, Goa 403708\",\n      \"price\": \"₹2,500 onwards\",\n      \"imageUrl\": \"https://www.thezuri.com/images/gallery/The-Zuri-White-Sands-Resort-&-Casino-Goa/large/the-zuri-white-sands-resort-and-casino-goa-exterior.jpg\",\n      \"geoCoordinates\": \"15.2434, 73.9570\",\n      \"rating\": 4.2,\n      \"description\": \"A vibrant resort featuring a casino, multiple swimming pools, and a variety of dining options.\"\n    },\n    {\n      \"name\": \"Candolim Villa\",\n      \"address\": \"Candolim, Bardez, Goa 403515\",\n      \"price\": \"₹1,500 onwards\",\n      \"imageUrl\": \"https://www.booking.com/hotel/in/candolim-villa.en-gb.html\",\n      \"geoCoordinates\": \"15.5009, 73.8598\",\n      \"rating\": 4.0,\n      \"description\": \"A budget-friendly villa with a swimming pool and a comfortable atmosphere.\"\n    },\n    {\n      \"name\": \"The Sun Village\",\n      \"address\": \"Candolim, Bardez, Goa 403515\",\n      \"price\": \"₹1,000 onwards\",\n      \"imageUrl\": \"https://www.thesunvillagegoa.com/images/gallery/exterior.jpg\",\n      \"geoCoordinates\": \"15.5024, 73.8628\",\n      \"rating\": 3.8,\n      \"description\": \"A simple and affordable option with a garden and a pool.\"\n    }\n  ],\n  \"itinerary\": [\n    {\n      \"day\": 1,\n      \"title\": \"Exploring North Goa\",\n      \"plan\": [\n        {\n          \"time\": \"9:00 AM\",\n          \"place\": \"Baga Beach\",\n          \"details\": \"One of the most popular beaches in Goa, famous for its water sports and vibrant nightlife.\",\n          \"imageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/4/4d/Baga_Beach%2C_Goa.jpg/1200px-Baga_Beach%2C_Goa.jpg\",\n          \"geoCoordinates\": \"15.5045, 73.8634\",\n          \"ticketPricing\": \"Free\",\n          \"rating\": 4.5,\n          \"timeToSpend\": \"3 hours\"\n        },\n        {\n          \"time\": \"12:30 PM\",\n          \"place\": \"Tito's Lane\",\n          \"details\": \"A famous street in Baga, packed with restaurants, bars, and shops.\",\n          \"imageUrl\": \"https://www.holidify.com/images/cmsuploads/2023/04/18/titos-lane.jpg\",\n          \"geoCoordinates\": \"15.5024, 73.8611\",\n          \"ticketPricing\": \"Free\",\n          \"rating\": 4.0,\n          \"timeToSpend\": \"2 hours\"\n        },\n        {\n          \"time\": \"3:00 PM\",\n          \"place\": \"Calangute Beach\",\n          \"details\": \"Another popular beach known for its lively atmosphere and water sports.\",\n          \"imageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/f/fa/Calangute_Beach%2C_Goa%2C_India.jpg/1024px-Calangute_Beach%2C_Goa%2C_India.jpg\",\n          \"geoCoordinates\": \"15.5030, 73.8624\",\n          \"ticketPricing\": \"Free\",\n          \"rating\": 4.3,\n          \"timeToSpend\": \"2 hours\"\n        },\n        {\n          \"time\": \"7:00 PM\",\n          \"place\": \"St. Anthony's Church, Nerul\",\n          \"details\": \"A beautiful 16th-century church with a serene atmosphere.\",\n          \"imageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/d/d0/St._Anthony%27s_Church_Goa.jpg/1200px-St._Anthony%27s_Church_Goa.jpg\",\n          \"geoCoordinates\": \"15.5098, 73.8740\",\n          \"ticketPricing\": \"Free\",\n          \"rating\": 4.2,\n          \"timeToSpend\": \"1 hour\"\n        }\n      ]\n    },\n    {\n      \"day\": 2,\n      \"title\": \"Exploring South Goa\",\n      \"plan\": [\n        {\n          \"time\": \"9:00 AM\",\n          \"place\": \"Palolem Beach\",\n          \"details\": \"A beautiful beach in South Goa known for its tranquil atmosphere and pristine waters.\",\n          \"imageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/9/97/Palolem_Beach.jpg/1200px-Palolem_Beach.jpg\",\n          \"geoCoordinates\": \"15.1763, 73.9708\",\n          \"ticketPricing\": \"Free\",\n          \"rating\": 4.6,\n          \"timeToSpend\": \"3 hours\"\n        },\n        {\n          \"time\": \"12:30 PM\",\n          \"place\": \"Cola Beach\",\n          \"details\": \"A secluded beach known for its scenic beauty and water sports.\",\n          \"imageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/f/f2/Cola_Beach_Goa%2C_India.jpg/1200px-Cola_Beach_Goa%2C_India.jpg\",\n          \"geoCoordinates\": \"15.1679, 73.9530\",\n          \"ticketPricing\": \"Free\",\n          \"rating\": 4.4,\n          \"timeToSpend\": \"2 hours\"\n        },\n        {\n          \"time\": \"3:00 PM\",\n          \"place\": \"Dudhsagar Falls\",\n          \"details\": \"A spectacular waterfall located on the border of Goa and Karnataka.\",\n          \"imageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/f/f6/Dudhsagar_Waterfall_%28Dec_2013%29.jpg/1200px-Dudhsagar_Waterfall_%28Dec_2013%29.jpg\",\n          \"geoCoordinates\": \"15.1584, 74.0540\",\n          \"ticketPricing\": \"₹100 per person\",\n          \"rating\": 4.8,\n          \"timeToSpend\": \"3 hours\"\n        },\n        {\n          \"time\": \"7:00 PM\",\n          \"place\": \"Sunset at Butterfly Beach\",\n          \"details\": \"A picturesque beach known for its stunning sunset views.\",\n          \"imageUrl\": \"https://www.holidify.com/images/cmsuploads/2023/04/18/butterfly-beach.jpg\",\n          \"geoCoordinates\": \"15.1635, 73.9608\",\n          \"ticketPricing\": \"Free\",\n          \"rating\": 4.5,\n          \"timeToSpend\": \"2 hours\"\n        }\n      ]\n    },\n    {\n      \"day\": 3,\n      \"title\": \"Exploring Old Goa & Panjim\",\n      \"plan\": [\n        {\n          \"time\": \"9:00 AM\",\n          \"place\": \"Basilica of Bom Jesus\",\n          \"details\": \"A UNESCO World Heritage Site housing the tomb of St. Francis Xavier.\",\n          \"imageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/a/a3/Basilica_of_Bom_Jesus%2C_Goa%2C_India.jpg/1200px-Basilica_of_Bom_Jesus%2C_Goa%2C_India.jpg\",\n          \"geoCoordinates\": \"15.4945, 73.8480\",\n          \"ticketPricing\": \"Free\",\n          \"rating\": 4.7,\n          \"timeToSpend\": \"2 hours\"\n        },\n        {\n          \"time\": \"11:30 AM\",\n          \"place\": \"Se Cathedral\",\n          \"details\": \"A grand cathedral built in the 16th century, known for its impressive architecture.\",\n          \"imageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/5/5c/Se_Cathedral_Old_Goa_Goa.jpg/1200px-Se_Cathedral_Old_Goa_Goa.jpg\",\n          \"geoCoordinates\": \"15.4954, 73.8472\",\n          \"ticketPricing\": \"Free\",\n          \"rating\": 4.4,\n          \"timeToSpend\": \"1 hour\"\n        },\n        {\n          \"time\": \"1:00 PM\",\n          \"place\": \"Panjim\",\n          \"details\": \"The capital of Goa, known for its charming Portuguese architecture and bustling markets.\",\n          \"imageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/4/47/Panjim_Goa_skyline_%282015%29.jpg/1200px-Panjim_Goa_skyline_%282015%29.jpg\",\n          \"geoCoordinates\": \"15.4952, 73.8278\",\n          \"ticketPricing\": \"Free\",\n          \"rating\": 4.2,\n          \"timeToSpend\": \"3 hours\"\n        },\n        {\n          \"time\": \"5:00 PM\",\n          \"place\": \"Miramar Beach\",\n          \"details\": \"A popular beach in Panjim known for its serene atmosphere and beautiful sunset views.\",\n          \"imageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/f/f4/Miramar_Beach%2C_Goa.jpg/1200px-Miramar_Beach%2C_Goa.jpg\",\n          \"geoCoordinates\": \"15.4974, 73.8180\",\n          \"ticketPricing\": \"Free\",\n          \"rating\": 4.1,\n          \"timeToSpend\": \"2 hours\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Notes:**\n\n* This itinerary is a suggestion and can be customized based on your interests and preferences.\n* The hotel prices are approximate and may vary depending on the season and availability.\n* You can find more affordable accommodation options like guesthouses and hostels in Goa.\n* It is recommended to book your accommodation and transportation in advance, especially during peak season.\n* For the cheapest travel, consider travelling during the off-season (May-October) or during the monsoon season (July-September).\n* Remember to carry essential items like sunscreen, insect repellent, and comfortable walking shoes.\n"},
          ],
        },
        {
          role: "user",
          parts: [
            {text: "Generate Travel Plan for Location : Goa, for 3 Days for Couple with a Cheap budget, Give me a Hotels options list with Hotel Name, Hotel address, Price, hotel image Url, geo coordinates, rating, description and suggest itinerary with place Name, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, rating, Time travel each of the location for 3 days with each day plan with best time to visit in JSON format."},
          ],
        },
      ],
    });


    
    
   